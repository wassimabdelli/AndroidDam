<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/tn/esprit/dam/screens/HomeScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/tn/esprit/dam/screens/HomeScreen.kt" />
              <option name="originalContent" value="package tn.esprit.dam.screens&#10;&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.lazy.LazyColumn&#10;import androidx.compose.foundation.lazy.items&#10;import androidx.compose.foundation.rememberScrollState&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.foundation.verticalScroll&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.*&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.LaunchedEffect&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.runtime.setValue&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.clip&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.tooling.preview.Preview&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import androidx.navigation.NavHostController&#10;import tn.esprit.dam.R&#10;import tn.esprit.dam.screens.cards.GameEntry&#10;import tn.esprit.dam.screens.cards.GameListItem&#10;import tn.esprit.dam.screens.cards.MainGreenCard&#10;import tn.esprit.dam.ui.theme.* // Keeping this to resolve dependencies if needed, but not using custom Colors directly&#10;import tn.esprit.dam.components.HomeBottomNavigationBar&#10;&#10;&#10;// --- Data &amp; Main Content Extracted (Unchanged) ---&#10;&#10;// Dummy data for GameList&#10;private val gameList = listOf(&#10;    GameEntry(&quot;Esprit Stade&quot;, &quot;18:00 - April 30&quot;, &quot;16/32&quot;, &quot;$400,00&quot;, R.drawable.stade1),&#10;    GameEntry(&quot;TamTam Stade&quot;, &quot;17:00 - April 24&quot;, &quot;08/16&quot;, &quot;$100,00&quot;, R.drawable.stade2),&#10;    GameEntry(&quot;FC Stadium&quot;, &quot;8:30 - April 15&quot;, &quot;22/32&quot;, &quot;$674,40&quot;, R.drawable.stade3)&#10;)&#10;&#10;// NEW: Extracted the main content Column to avoid Scaffold/NavHostController issues in preview&#10;@Composable&#10;fun HomeContent(paddingValues: PaddingValues = PaddingValues(0.dp)) {&#10;    val topBackgroundColor = MaterialTheme.colorScheme.background&#10;    val listBackgroundColor = MaterialTheme.colorScheme.surface&#10;&#10;    // Make the whole content scrollable&#10;    Column(&#10;        modifier = Modifier&#10;            .fillMaxSize()&#10;            .background(topBackgroundColor)&#10;            .padding(paddingValues)&#10;            .verticalScroll(rememberScrollState())&#10;    ) {&#10;        // Top part of the screen&#10;        TopSection()&#10;        StatsSection()&#10;&#10;        // --- Bottom Column with rounded top corners for cards/list ---&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .clip(RoundedCornerShape(topStart = 30.dp, topEnd = 30.dp))&#10;                .background(listBackgroundColor) // Bottom part uses Surface (for contrast)&#10;        ) {&#10;            Spacer(modifier = Modifier.height(12.dp))&#10;            MainGreenCard()&#10;&#10;            TabBar()&#10;&#10;            LazyColumn(&#10;                modifier = Modifier.heightIn(min = 0.dp, max = 400.dp),&#10;                contentPadding = PaddingValues(bottom = 16.dp)&#10;            ) {&#10;                items(gameList) { game -&gt;&#10;                    GameListItem(game = game)&#10;                }&#10;            }&#10;            // --- Shared Preferences Debug Section at the bottom ---&#10;            SharedPrefsDebugSectionWithUser()&#10;            DataStoreUserDebugSection()&#10;        }&#10;    }&#10;}&#10;&#10;&#10;@Composable&#10;fun HomeScreen(navController: NavHostController) {&#10;    Scaffold(&#10;        // Ensure Scaffold background is set to a base color, usually background&#10;        containerColor = MaterialTheme.colorScheme.background,&#10;        bottomBar = { HomeBottomNavigationBar(navController = navController) },&#10;        modifier = Modifier.fillMaxSize()&#10;    ) { paddingValues -&gt;&#10;        Column(modifier = Modifier.fillMaxSize()) {&#10;            HomeContent(paddingValues)&#10;        }&#10;    }&#10;}&#10;&#10;// --- Helper Composables (Colors changed to MaterialTheme) ---&#10;@Composable&#10;fun TopSection() {&#10;    val context = LocalContext.current&#10;    var playerName by remember { mutableStateOf(&quot;Player Name&quot;) }&#10;    LaunchedEffect(Unit) {&#10;        try {&#10;            val app = context.applicationContext as android.app.Application&#10;            val repo = tn.esprit.dam.data.AuthRepository(app)&#10;            val user = repo.getUser()&#10;            playerName = if (user != null) {&#10;                listOfNotNull(user.prenom, user.nom).joinToString(&quot; &quot;).ifBlank { user.email ?: &quot;Player&quot; }&#10;            } else {&#10;                &quot;Player Name&quot;&#10;            }&#10;        } catch (_: Exception) {&#10;            playerName = &quot;Player Name&quot;&#10;        }&#10;    }&#10;    val onBackgroundColor = MaterialTheme.colorScheme.onBackground&#10;    val primaryColor = MaterialTheme.colorScheme.primary&#10;&#10;    Row(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .padding(horizontal = 16.dp)&#10;            .padding(top = 16.dp, bottom = 8.dp),&#10;        horizontalArrangement = Arrangement.SpaceBetween,&#10;        verticalAlignment = Alignment.CenterVertically&#10;    ) {&#10;        Column {&#10;            Text(&quot;Hi, Welcome Back&quot;, color = onBackgroundColor, fontSize = 28.sp, fontWeight = FontWeight.Bold)&#10;            Text(playerName, color = onBackgroundColor, fontSize = 16.sp)&#10;        }&#10;        Icon(&#10;            Icons.Default.Notifications,&#10;            contentDescription = &quot;Notifications&quot;,&#10;            tint = primaryColor, // Use Primary color&#10;            modifier = Modifier.size(30.dp)&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;fun StatsSection() {&#10;    // MAPPING: TextBlack -&gt; onBackground&#10;    // MAPPING: LossText -&gt; MaterialTheme.colorScheme.error&#10;    // MAPPING: MediumGreen -&gt; MaterialTheme.colorScheme.primary&#10;    // MAPPING: TextWhite (for Divider) -&gt; MaterialTheme.colorScheme.onBackground.copy(alpha=0.2f)&#10;    // MAPPING: WinrateProgress (Color) -&gt; MaterialTheme.colorScheme.secondary&#10;    // MAPPING: DarkerGreen -&gt; MaterialTheme.colorScheme.primary&#10;    // MAPPING: LightGreen -&gt; MaterialTheme.colorScheme.secondary&#10;&#10;    val onBackgroundColor = MaterialTheme.colorScheme.onBackground&#10;    val primaryColor = MaterialTheme.colorScheme.primary&#10;    val secondaryColor = MaterialTheme.colorScheme.secondary&#10;    val errorColor = MaterialTheme.colorScheme.error&#10;&#10;    Column(modifier = Modifier.padding(horizontal = 16.dp, vertical = 8.dp)) {&#10;        // Total Losses / Total Wins Row&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(vertical = 4.dp, horizontal = 24.dp),&#10;            horizontalArrangement = Arrangement.SpaceBetween,&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            // Total Losses&#10;            Row(verticalAlignment = Alignment.CenterVertically) {&#10;                Icon(Icons.Default.Square, contentDescription = &quot;Losses&quot;, tint = errorColor, modifier = Modifier.size(20.dp))&#10;                Spacer(Modifier.width(8.dp))&#10;                Column(horizontalAlignment = Alignment.CenterHorizontally) {&#10;                    Text(&quot;Total Losses&quot;, color = onBackgroundColor, fontSize = 14.sp)&#10;                    Text(&quot;21&quot;, color = errorColor, fontSize = 24.sp, fontWeight = FontWeight.ExtraBold)&#10;                }&#10;            }&#10;&#10;            // Vertical Divider (Central separator)&#10;            HorizontalDivider(&#10;                color = onBackgroundColor.copy(alpha = 0.2f),&#10;                modifier = Modifier&#10;                    .height(60.dp)&#10;                    .width(1.dp)&#10;            )&#10;&#10;            // Total Wins&#10;            Row(verticalAlignment = Alignment.CenterVertically) {&#10;                Icon(Icons.Default.CheckCircle, contentDescription = &quot;Wins&quot;, tint = primaryColor, modifier = Modifier.size(20.dp))&#10;                Spacer(Modifier.width(8.dp))&#10;                Column(horizontalAlignment = Alignment.CenterHorizontally) {&#10;                    Text(&quot;Total Wins&quot;, color = onBackgroundColor, fontSize = 14.sp)&#10;                    Text(&quot;63&quot;, color = primaryColor, fontSize = 24.sp, fontWeight = FontWeight.ExtraBold)&#10;                }&#10;            }&#10;        }&#10;&#10;        Spacer(Modifier.height(16.dp))&#10;&#10;        // Winrate Progress Bar&#10;        Row(modifier = Modifier.fillMaxWidth(), verticalAlignment = Alignment.CenterVertically) {&#10;            Text(&quot;Winrate&quot;, color = onBackgroundColor, fontWeight = FontWeight.SemiBold)&#10;            Spacer(Modifier.width(8.dp))&#10;            LinearProgressIndicator(&#10;                progress = { 0.75f },&#10;                modifier = Modifier.weight(1f).height(8.dp).clip(RoundedCornerShape(50)),&#10;                color = secondaryColor, // Use Secondary for progress color&#10;                // Use a subtle surface variant for the track&#10;                trackColor = MaterialTheme.colorScheme.surfaceVariant&#10;            )&#10;            Spacer(Modifier.width(8.dp))&#10;            Text(&quot;%75&quot;, color = primaryColor, fontWeight = FontWeight.Bold) // Use Primary color&#10;        }&#10;&#10;        Spacer(Modifier.height(8.dp))&#10;&#10;        Row(verticalAlignment = Alignment.CenterVertically) {&#10;            Icon(Icons.Default.Check, contentDescription = &quot;Checked&quot;, tint = secondaryColor, modifier = Modifier.size(16.dp))&#10;            Spacer(Modifier.width(4.dp))&#10;            Text(&quot;75% Of Your Games, Looks Good.&quot;, color = onBackgroundColor, fontSize = 14.sp)&#10;        }&#10;&#10;        Spacer(Modifier.height(16.dp))&#10;    }&#10;}&#10;&#10;@Composable&#10;fun TabBar() {&#10;    val tabs = listOf(&quot;Today&quot;, &quot;This Week&quot;, &quot;This Month&quot;)&#10;    var selectedIndex by remember { mutableStateOf(2) }&#10;&#10;    // MAPPING: DarkerGreen (Tab background) -&gt; MaterialTheme.colorScheme.primaryContainer&#10;    // MAPPING: TabSelected (Selected tab background) -&gt; MaterialTheme.colorScheme.primary&#10;    // MAPPING: TextWhite (Selected text color) -&gt; MaterialTheme.colorScheme.onPrimary&#10;    // MAPPING: TabUnselectedText (Unselected text color) -&gt; MaterialTheme.colorScheme.onPrimaryContainer&#10;&#10;    val tabRowBackground = MaterialTheme.colorScheme.primaryContainer&#10;    val tabSelectedBackground = MaterialTheme.colorScheme.primary&#10;    val tabSelectedTextColor = MaterialTheme.colorScheme.onPrimary&#10;    val tabUnselectedTextColor = MaterialTheme.colorScheme.onPrimaryContainer.copy(alpha = 0.8f)&#10;&#10;&#10;    Row(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .padding(16.dp)&#10;            .clip(RoundedCornerShape(50.dp))&#10;            .background(tabRowBackground) // Use Primary Container for the background&#10;            .height(40.dp),&#10;        horizontalArrangement = Arrangement.SpaceEvenly&#10;    ) {&#10;        tabs.forEachIndexed { index, title -&gt;&#10;            val isSelected = index == selectedIndex&#10;            Box(&#10;                modifier = Modifier&#10;                    .weight(1f)&#10;                    .fillMaxHeight()&#10;                    .clip(RoundedCornerShape(50.dp))&#10;                    .background(if (isSelected) tabSelectedBackground else Color.Transparent)&#10;                    .padding(horizontal = 8.dp)&#10;                    .clickable { selectedIndex = index },&#10;                contentAlignment = Alignment.Center&#10;            ) {&#10;                Text(&#10;                    text = title,&#10;                    color = if (isSelected) tabSelectedTextColor else tabUnselectedTextColor,&#10;                    fontWeight = if (isSelected) FontWeight.Bold else FontWeight.Normal,&#10;                    fontSize = 14.sp&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun SharedPrefsDebugSectionWithUser() {&#10;    val context = LocalContext.current&#10;    var prefsDump by remember { mutableStateOf(&quot;Loading...&quot;) }&#10;    var userInfo by remember { mutableStateOf&lt;String?&gt;(null) }&#10;    LaunchedEffect(Unit) {&#10;        try {&#10;            val app = context.applicationContext as android.app.Application&#10;            val repo = tn.esprit.dam.data.AuthRepository(app)&#10;            val token = repo.getToken() ?: &quot;&lt;none&gt;&quot;&#10;            val rememberMe = repo.getRememberMe().toString()&#10;            val pendingEmail = repo.getPendingVerificationEmail() ?: &quot;&lt;none&gt;&quot;&#10;            val (forgotEmail, forgotCode) = repo.getForgotPasswordContext()&#10;            val user = repo.getUser()&#10;            prefsDump = &quot;\n--- DataStore (Shared Preferences) ---\n&quot; +&#10;                &quot;JWT Token: $token\n&quot; +&#10;                &quot;Remember Me: $rememberMe\n&quot; +&#10;                &quot;Pending Verification Email: $pendingEmail\n&quot; +&#10;                &quot;Forgot Password Email: ${forgotEmail ?: &quot;&lt;none&gt;&quot;}\n&quot; +&#10;                &quot;Forgot Password Code: ${forgotCode ?: &quot;&lt;none&gt;&quot;}&quot;&#10;            userInfo = if (user != null) {&#10;                &quot;ID: ${user._id}\n&quot; +&#10;                &quot;First Name: ${user.prenom}\n&quot; +&#10;                &quot;Last Name: ${user.nom}\n&quot; +&#10;                &quot;Email: ${user.email}\n&quot; +&#10;                &quot;Birth Date: ${user.age}\n&quot; +&#10;                &quot;Phone: ${user.tel}\n&quot; +&#10;                &quot;Role: ${user.role}\n&quot; +&#10;                &quot;Email Verified: ${user.emailVerified}\n&quot; +&#10;                &quot;Is Verified: ${user.isVerified}&quot;&#10;            } else null&#10;        } catch (e: Exception) {&#10;            prefsDump = &quot;Error reading shared preferences: ${e.message}&quot;&#10;            userInfo = null&#10;        }&#10;    }&#10;    Card(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .padding(16.dp),&#10;        colors = CardDefaults.cardColors(containerColor = MaterialTheme.colorScheme.surfaceVariant)&#10;    ) {&#10;        Column(modifier = Modifier.padding(16.dp)) {&#10;            Text(&quot;Shared Preferences Debug&quot;, fontWeight = FontWeight.Bold, color = MaterialTheme.colorScheme.primary)&#10;            Spacer(Modifier.height(8.dp))&#10;            Text(prefsDump, color = MaterialTheme.colorScheme.onSurfaceVariant)&#10;            Spacer(Modifier.height(16.dp))&#10;            Text(&quot;User Info&quot;, fontWeight = FontWeight.Bold, color = MaterialTheme.colorScheme.primary)&#10;            Spacer(Modifier.height(8.dp))&#10;            if (userInfo != null) {&#10;                Text(userInfo!!, color = MaterialTheme.colorScheme.onSurfaceVariant)&#10;            } else {&#10;                Text(&quot;No user info available.&quot;, color = MaterialTheme.colorScheme.error)&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun DataStoreUserDebugSection() {&#10;    val context = LocalContext.current&#10;    var userInfo by remember { mutableStateOf(&quot;Chargement...&quot;) }&#10;    LaunchedEffect(Unit) {&#10;        try {&#10;            val app = context.applicationContext as android.app.Application&#10;            val repo = tn.esprit.dam.data.AuthRepository(app)&#10;            val user = repo.getUser()&#10;            userInfo = if (user != null) {&#10;                &quot;ID: ${user._id}\n&quot; +&#10;                &quot;Prénom: ${user.prenom}\n&quot; +&#10;                &quot;Nom: ${user.nom}\n&quot; +&#10;                &quot;Email: ${user.email}\n&quot; +&#10;                &quot;Date de naissance: ${user.age}\n&quot; +&#10;                &quot;Téléphone: ${user.tel}\n&quot; +&#10;                &quot;Rôle: ${user.role}\n&quot; +&#10;                &quot;Email vérifié: ${user.emailVerified}\n&quot; +&#10;                &quot;Compte vérifié: ${user.isVerified}&quot;&#10;            } else {&#10;                &quot;Aucune information utilisateur enregistrée.&quot;&#10;            }&#10;        } catch (e: Exception) {&#10;            userInfo = &quot;Erreur lors de la lecture du DataStore: ${e.message}&quot;&#10;        }&#10;    }&#10;    Card(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .padding(16.dp),&#10;        colors = CardDefaults.cardColors(containerColor = MaterialTheme.colorScheme.surfaceVariant)&#10;    ) {&#10;        Column(modifier = Modifier.padding(16.dp)) {&#10;            Text(&quot;User DataStore Debug&quot;, fontWeight = FontWeight.Bold, color = MaterialTheme.colorScheme.primary)&#10;            Spacer(Modifier.height(8.dp))&#10;            Text(userInfo, color = MaterialTheme.colorScheme.onSurfaceVariant)&#10;        }&#10;    }&#10;}&#10;&#10;&#10;// --- PREVIEW FUNCTION ---&#10;@Preview(showBackground = true, name = &quot;Home Screen Final&quot;)&#10;@Composable&#10;fun HomeScreenPreview() {&#10;    // Wrap the content in your theme/surface for correct color rendering&#10;    DAMTheme {&#10;        Surface(color = MaterialTheme.colorScheme.background) {&#10;            HomeContent()&#10;        }&#10;    }&#10;}" />
              <option name="updatedContent" value="package tn.esprit.dam.screens&#10;&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.lazy.LazyColumn&#10;import androidx.compose.foundation.lazy.items&#10;import androidx.compose.foundation.rememberScrollState&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.foundation.verticalScroll&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.*&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.LaunchedEffect&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.runtime.setValue&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.clip&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.tooling.preview.Preview&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import androidx.navigation.NavHostController&#10;import tn.esprit.dam.R&#10;import tn.esprit.dam.screens.cards.GameEntry&#10;import tn.esprit.dam.screens.cards.GameListItem&#10;import tn.esprit.dam.screens.cards.MainGreenCard&#10;import tn.esprit.dam.ui.theme.* // Keeping this to resolve dependencies if needed, but not using custom Colors directly&#10;import tn.esprit.dam.components.HomeBottomNavigationBar&#10;&#10;&#10;// --- Data &amp; Main Content Extracted (Unchanged) ---&#10;&#10;// Dummy data for GameList&#10;private val gameList = listOf(&#10;    GameEntry(&quot;Esprit Stade&quot;, &quot;18:00 - April 30&quot;, &quot;16/32&quot;, &quot;$400,00&quot;, R.drawable.stade1),&#10;    GameEntry(&quot;TamTam Stade&quot;, &quot;17:00 - April 24&quot;, &quot;08/16&quot;, &quot;$100,00&quot;, R.drawable.stade2),&#10;    GameEntry(&quot;FC Stadium&quot;, &quot;8:30 - April 15&quot;, &quot;22/32&quot;, &quot;$674,40&quot;, R.drawable.stade3)&#10;)&#10;&#10;// NEW: Extracted the main content Column to avoid Scaffold/NavHostController issues in preview&#10;@Composable&#10;fun HomeContent(paddingValues: PaddingValues = PaddingValues(0.dp)) {&#10;    val topBackgroundColor = MaterialTheme.colorScheme.background&#10;    val listBackgroundColor = MaterialTheme.colorScheme.surface&#10;&#10;    // Make the whole content scrollable&#10;    Column(&#10;        modifier = Modifier&#10;            .fillMaxSize()&#10;            .background(topBackgroundColor)&#10;            .padding(paddingValues)&#10;            .verticalScroll(rememberScrollState())&#10;    ) {&#10;        // Top part of the screen&#10;        TopSection()&#10;        StatsSection()&#10;&#10;        // --- Bottom Column with rounded top corners for cards/list ---&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .clip(RoundedCornerShape(topStart = 30.dp, topEnd = 30.dp))&#10;                .background(listBackgroundColor) // Bottom part uses Surface (for contrast)&#10;        ) {&#10;            Spacer(modifier = Modifier.height(12.dp))&#10;            MainGreenCard()&#10;&#10;            TabBar()&#10;&#10;            LazyColumn(&#10;                modifier = Modifier.heightIn(min = 0.dp, max = 400.dp),&#10;                contentPadding = PaddingValues(bottom = 16.dp)&#10;            ) {&#10;                items(gameList) { game -&gt;&#10;                    GameListItem(game = game)&#10;                }&#10;            }&#10;            // --- Shared Preferences Debug Section at the bottom ---&#10;            SharedPrefsDebugSectionWithUser()&#10;            DataStoreUserDebugSection()&#10;        }&#10;    }&#10;}&#10;&#10;&#10;@Composable&#10;fun HomeScreen(navController: NavHostController) {&#10;    Scaffold(&#10;        // Ensure Scaffold background is set to a base color, usually background&#10;        containerColor = MaterialTheme.colorScheme.background,&#10;        bottomBar = { HomeBottomNavigationBar(navController = navController) },&#10;        modifier = Modifier.fillMaxSize()&#10;    ) { paddingValues -&gt;&#10;        Column(modifier = Modifier.fillMaxSize()) {&#10;            HomeContent(paddingValues)&#10;        }&#10;    }&#10;}&#10;&#10;// --- Helper Composables (Colors changed to MaterialTheme) ---&#10;@Composable&#10;fun TopSection() {&#10;    val context = LocalContext.current&#10;    var playerName by remember { mutableStateOf(&quot;Player Name&quot;) }&#10;    LaunchedEffect(Unit) {&#10;        try {&#10;            val app = context.applicationContext as android.app.Application&#10;            val repo = tn.esprit.dam.data.AuthRepository(app)&#10;            val user = repo.getUser()&#10;            playerName = if (user != null) {&#10;                listOfNotNull(user.prenom, user.nom).joinToString(&quot; &quot;).ifBlank { user.email ?: &quot;Player&quot; }&#10;            } else {&#10;                &quot;Player Name&quot;&#10;            }&#10;        } catch (_: Exception) {&#10;            playerName = &quot;Player Name&quot;&#10;        }&#10;    }&#10;    val onBackgroundColor = MaterialTheme.colorScheme.onBackground&#10;    val primaryColor = MaterialTheme.colorScheme.primary&#10;    Row(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .padding(horizontal = 16.dp)&#10;            .padding(top = 16.dp, bottom = 8.dp),&#10;        horizontalArrangement = Arrangement.SpaceBetween,&#10;        verticalAlignment = Alignment.CenterVertically&#10;    ) {&#10;        Column {&#10;            Text(&quot;Hi, Welcome Back&quot;, color = onBackgroundColor, fontSize = 28.sp, fontWeight = FontWeight.Bold)&#10;            Text(playerName, color = onBackgroundColor, fontSize = 16.sp)&#10;        }&#10;        Icon(&#10;            Icons.Default.Notifications,&#10;            contentDescription = &quot;Notifications&quot;,&#10;            tint = primaryColor, // Use Primary color&#10;            modifier = Modifier.size(30.dp)&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;fun StatsSection() {&#10;    // MAPPING: TextBlack -&gt; onBackground&#10;    // MAPPING: LossText -&gt; MaterialTheme.colorScheme.error&#10;    // MAPPING: MediumGreen -&gt; MaterialTheme.colorScheme.primary&#10;    // MAPPING: TextWhite (for Divider) -&gt; MaterialTheme.colorScheme.onBackground.copy(alpha=0.2f)&#10;    // MAPPING: WinrateProgress (Color) -&gt; MaterialTheme.colorScheme.secondary&#10;    // MAPPING: DarkerGreen -&gt; MaterialTheme.colorScheme.primary&#10;    // MAPPING: LightGreen -&gt; MaterialTheme.colorScheme.secondary&#10;&#10;    val onBackgroundColor = MaterialTheme.colorScheme.onBackground&#10;    val primaryColor = MaterialTheme.colorScheme.primary&#10;    val secondaryColor = MaterialTheme.colorScheme.secondary&#10;    val errorColor = MaterialTheme.colorScheme.error&#10;&#10;    Column(modifier = Modifier.padding(horizontal = 16.dp, vertical = 8.dp)) {&#10;        // Total Losses / Total Wins Row&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(vertical = 4.dp, horizontal = 24.dp),&#10;            horizontalArrangement = Arrangement.SpaceBetween,&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            // Total Losses&#10;            Row(verticalAlignment = Alignment.CenterVertically) {&#10;                Icon(Icons.Default.Square, contentDescription = &quot;Losses&quot;, tint = errorColor, modifier = Modifier.size(20.dp))&#10;                Spacer(Modifier.width(8.dp))&#10;                Column(horizontalAlignment = Alignment.CenterHorizontally) {&#10;                    Text(&quot;Total Losses&quot;, color = onBackgroundColor, fontSize = 14.sp)&#10;                    Text(&quot;21&quot;, color = errorColor, fontSize = 24.sp, fontWeight = FontWeight.ExtraBold)&#10;                }&#10;            }&#10;&#10;            // Vertical Divider (Central separator)&#10;            HorizontalDivider(&#10;                color = onBackgroundColor.copy(alpha = 0.2f),&#10;                modifier = Modifier&#10;                    .height(60.dp)&#10;                    .width(1.dp)&#10;            )&#10;&#10;            // Total Wins&#10;            Row(verticalAlignment = Alignment.CenterVertically) {&#10;                Icon(Icons.Default.CheckCircle, contentDescription = &quot;Wins&quot;, tint = primaryColor, modifier = Modifier.size(20.dp))&#10;                Spacer(Modifier.width(8.dp))&#10;                Column(horizontalAlignment = Alignment.CenterHorizontally) {&#10;                    Text(&quot;Total Wins&quot;, color = onBackgroundColor, fontSize = 14.sp)&#10;                    Text(&quot;63&quot;, color = primaryColor, fontSize = 24.sp, fontWeight = FontWeight.ExtraBold)&#10;                }&#10;            }&#10;        }&#10;&#10;        Spacer(Modifier.height(16.dp))&#10;&#10;        // Winrate Progress Bar&#10;        Row(modifier = Modifier.fillMaxWidth(), verticalAlignment = Alignment.CenterVertically) {&#10;            Text(&quot;Winrate&quot;, color = onBackgroundColor, fontWeight = FontWeight.SemiBold)&#10;            Spacer(Modifier.width(8.dp))&#10;            LinearProgressIndicator(&#10;                progress = { 0.75f },&#10;                modifier = Modifier.weight(1f).height(8.dp).clip(RoundedCornerShape(50)),&#10;                color = secondaryColor, // Use Secondary for progress color&#10;                // Use a subtle surface variant for the track&#10;                trackColor = MaterialTheme.colorScheme.surfaceVariant&#10;            )&#10;            Spacer(Modifier.width(8.dp))&#10;            Text(&quot;%75&quot;, color = primaryColor, fontWeight = FontWeight.Bold) // Use Primary color&#10;        }&#10;&#10;        Spacer(Modifier.height(8.dp))&#10;&#10;        Row(verticalAlignment = Alignment.CenterVertically) {&#10;            Icon(Icons.Default.Check, contentDescription = &quot;Checked&quot;, tint = secondaryColor, modifier = Modifier.size(16.dp))&#10;            Spacer(Modifier.width(4.dp))&#10;            Text(&quot;75% Of Your Games, Looks Good.&quot;, color = onBackgroundColor, fontSize = 14.sp)&#10;        }&#10;&#10;        Spacer(Modifier.height(16.dp))&#10;    }&#10;}&#10;&#10;@Composable&#10;fun TabBar() {&#10;    val tabs = listOf(&quot;Today&quot;, &quot;This Week&quot;, &quot;This Month&quot;)&#10;    var selectedIndex by remember { mutableStateOf(2) }&#10;&#10;    // MAPPING: DarkerGreen (Tab background) -&gt; MaterialTheme.colorScheme.primaryContainer&#10;    // MAPPING: TabSelected (Selected tab background) -&gt; MaterialTheme.colorScheme.primary&#10;    // MAPPING: TextWhite (Selected text color) -&gt; MaterialTheme.colorScheme.onPrimary&#10;    // MAPPING: TabUnselectedText (Unselected text color) -&gt; MaterialTheme.colorScheme.onPrimaryContainer&#10;&#10;    val tabRowBackground = MaterialTheme.colorScheme.primaryContainer&#10;    val tabSelectedBackground = MaterialTheme.colorScheme.primary&#10;    val tabSelectedTextColor = MaterialTheme.colorScheme.onPrimary&#10;    val tabUnselectedTextColor = MaterialTheme.colorScheme.onPrimaryContainer.copy(alpha = 0.8f)&#10;&#10;&#10;    Row(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .padding(16.dp)&#10;            .clip(RoundedCornerShape(50.dp))&#10;            .background(tabRowBackground) // Use Primary Container for the background&#10;            .height(40.dp),&#10;        horizontalArrangement = Arrangement.SpaceEvenly&#10;    ) {&#10;        tabs.forEachIndexed { index, title -&gt;&#10;            val isSelected = index == selectedIndex&#10;            Box(&#10;                modifier = Modifier&#10;                    .weight(1f)&#10;                    .fillMaxHeight()&#10;                    .clip(RoundedCornerShape(50.dp))&#10;                    .background(if (isSelected) tabSelectedBackground else Color.Transparent)&#10;                    .padding(horizontal = 8.dp)&#10;                    .clickable { selectedIndex = index },&#10;                contentAlignment = Alignment.Center&#10;            ) {&#10;                Text(&#10;                    text = title,&#10;                    color = if (isSelected) tabSelectedTextColor else tabUnselectedTextColor,&#10;                    fontWeight = if (isSelected) FontWeight.Bold else FontWeight.Normal,&#10;                    fontSize = 14.sp&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun SharedPrefsDebugSectionWithUser() {&#10;    val context = LocalContext.current&#10;    var prefsDump by remember { mutableStateOf(&quot;Loading...&quot;) }&#10;    var userInfo by remember { mutableStateOf&lt;String?&gt;(null) }&#10;    LaunchedEffect(Unit) {&#10;        try {&#10;            val app = context.applicationContext as android.app.Application&#10;            val repo = tn.esprit.dam.data.AuthRepository(app)&#10;            val token = repo.getToken() ?: &quot;&lt;none&gt;&quot;&#10;            val rememberMe = repo.getRememberMe().toString()&#10;            val pendingEmail = repo.getPendingVerificationEmail() ?: &quot;&lt;none&gt;&quot;&#10;            val (forgotEmail, forgotCode) = repo.getForgotPasswordContext()&#10;            val user = repo.getUser()&#10;            prefsDump = &quot;\n--- DataStore (Shared Preferences) ---\n&quot; +&#10;                &quot;JWT Token: $token\n&quot; +&#10;                &quot;Remember Me: $rememberMe\n&quot; +&#10;                &quot;Pending Verification Email: $pendingEmail\n&quot; +&#10;                &quot;Forgot Password Email: ${forgotEmail ?: &quot;&lt;none&gt;&quot;}\n&quot; +&#10;                &quot;Forgot Password Code: ${forgotCode ?: &quot;&lt;none&gt;&quot;}&quot;&#10;            userInfo = if (user != null) {&#10;                &quot;ID: ${user._id}\n&quot; +&#10;                &quot;First Name: ${user.prenom}\n&quot; +&#10;                &quot;Last Name: ${user.nom}\n&quot; +&#10;                &quot;Email: ${user.email}\n&quot; +&#10;                &quot;Birth Date: ${user.age}\n&quot; +&#10;                &quot;Phone: ${user.tel}\n&quot; +&#10;                &quot;Role: ${user.role}\n&quot; +&#10;                &quot;Email Verified: ${user.emailVerified}\n&quot; +&#10;                &quot;Is Verified: ${user.isVerified}&quot;&#10;            } else null&#10;        } catch (e: Exception) {&#10;            prefsDump = &quot;Error reading shared preferences: ${e.message}&quot;&#10;            userInfo = null&#10;        }&#10;    }&#10;    Card(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .padding(16.dp),&#10;        colors = CardDefaults.cardColors(containerColor = MaterialTheme.colorScheme.surfaceVariant)&#10;    ) {&#10;        Column(modifier = Modifier.padding(16.dp)) {&#10;            Text(&quot;Shared Preferences Debug&quot;, fontWeight = FontWeight.Bold, color = MaterialTheme.colorScheme.primary)&#10;            Spacer(Modifier.height(8.dp))&#10;            Text(prefsDump, color = MaterialTheme.colorScheme.onSurfaceVariant)&#10;            Spacer(Modifier.height(16.dp))&#10;            Text(&quot;User Info&quot;, fontWeight = FontWeight.Bold, color = MaterialTheme.colorScheme.primary)&#10;            Spacer(Modifier.height(8.dp))&#10;            if (userInfo != null) {&#10;                Text(userInfo!!, color = MaterialTheme.colorScheme.onSurfaceVariant)&#10;            } else {&#10;                Text(&quot;No user info available.&quot;, color = MaterialTheme.colorScheme.error)&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun DataStoreUserDebugSection() {&#10;    val context = LocalContext.current&#10;    var userInfo by remember { mutableStateOf(&quot;Chargement...&quot;) }&#10;    LaunchedEffect(Unit) {&#10;        try {&#10;            val app = context.applicationContext as android.app.Application&#10;            val repo = tn.esprit.dam.data.AuthRepository(app)&#10;            val user = repo.getUser()&#10;            userInfo = if (user != null) {&#10;                &quot;ID: ${user._id}\n&quot; +&#10;                &quot;Prénom: ${user.prenom}\n&quot; +&#10;                &quot;Nom: ${user.nom}\n&quot; +&#10;                &quot;Email: ${user.email}\n&quot; +&#10;                &quot;Date de naissance: ${user.age}\n&quot; +&#10;                &quot;Téléphone: ${user.tel}\n&quot; +&#10;                &quot;Rôle: ${user.role}\n&quot; +&#10;                &quot;Email vérifié: ${user.emailVerified}\n&quot; +&#10;                &quot;Compte vérifié: ${user.isVerified}&quot;&#10;            } else {&#10;                &quot;Aucune information utilisateur enregistrée.&quot;&#10;            }&#10;        } catch (e: Exception) {&#10;            userInfo = &quot;Erreur lors de la lecture du DataStore: ${e.message}&quot;&#10;        }&#10;    }&#10;    Card(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .padding(16.dp),&#10;        colors = CardDefaults.cardColors(containerColor = MaterialTheme.colorScheme.surfaceVariant)&#10;    ) {&#10;        Column(modifier = Modifier.padding(16.dp)) {&#10;            Text(&quot;User DataStore Debug&quot;, fontWeight = FontWeight.Bold, color = MaterialTheme.colorScheme.primary)&#10;            Spacer(Modifier.height(8.dp))&#10;            Text(userInfo, color = MaterialTheme.colorScheme.onSurfaceVariant)&#10;        }&#10;    }&#10;}&#10;&#10;&#10;// --- PREVIEW FUNCTION ---&#10;@Preview(showBackground = true, name = &quot;Home Screen Final&quot;)&#10;@Composable&#10;fun HomeScreenPreview() {&#10;    // Wrap the content in your theme/surface for correct color rendering&#10;    DAMTheme {&#10;        Surface(color = MaterialTheme.colorScheme.background) {&#10;            HomeContent()&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>